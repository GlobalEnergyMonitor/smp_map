
    var mine = {
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              148.90395,
              -23.66666
            ],
            [
              148.886579,
              -23.66666
            ],
            [
              148.885249,
              -23.865209
            ],
            [
              148.886612,
              -23.866458
            ],
            [
              148.944967,
              -23.86503
            ],
            [
              148.944936,
              -23.586752
            ],
            [
              148.903939,
              -23.586742
            ],
            [
              148.90395,
              -23.66666
            ]
          ]
        ]
      },
      "properties": {
        "id": "M1531.B1",
        "mine feature category": "mine boundary",
        "mine feature subcategory": "underground",
        "data source date": "15 Dec 2024 (from QSpatial mining leases page)",
        "notes": "The mining lease boundaries of the Cook Colliery coal mine were downloaded from the Queensland Spatial Catalogue's (QSpatial) Mining Leases boundary data, https://web.archive.org/web/20250925133756/https://qldspatial.information.qld.gov.au/catalogue/custom/index.page.  The five relevant mining leases were confirmed to be part of the Cook Colliery mine in a 2019 Bounty Mining Ltd document, https://web.archive.org/save/https://minedocs.com/11/Cook_Colliery_Resource_Update_08212019.pdf ), and a polygon was then extracted at the outer boundary of all adjacent mining lease areas. The approximate area within the boundary is 171 square km.",
        "description": "Cook Colliery coal mine total mining leases boundary",
        "coordinates precision": "extracted",
        "GEM Mine ID": "M1531",
        "Owners": "QCoal [100%]",
        "Owners (Non-ENG)": "",
        "Parent Company": "QCoal",
        "GEM Wiki Page (ENG)": "https://www.gem.wiki/Cook_Colliery",
        "GEM Wiki Page (Non-ENG)": "",
        "Coal Grade": "Thermal & Met",
        "Mine Name": "Cook Colliery Coal Mine",
        "Country / Area": "Australia",
        "Last researched": "Jun 16, 2025",
        "build_version": "Coal Mine Boundaries and Methane Sources - version 1.0.1 (built on February 13 2026 18.38.33 EST)"
      }
    },
    {
      "type": "Feature",
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              148.886597,
              -23.705763
            ],
            [
              148.886599,
              -23.716037
            ],
            [
              148.903262,
              -23.716132
            ],
            [
              148.908916,
              -23.716164
            ],
            [
              148.908913,
              -23.705888
            ],
            [
              148.886597,
              -23.705763
            ]
          ]
        ]
      },
      "properties": {
        "id": "M1531.B2",
        "mine feature category": "mine boundary",
        "mine feature subcategory": "underground",
        "data source date": "15 Dec 2024 (from QSpatial mining leases page)",
        "notes": "The boundary is for mining lease ML 1768 and is one of five mining lease boundaries compile the Cook Colliery coal mine. The boundary was downloaded from the Queensland Spatial Catalogue's (QSpatial) Mining Leases boundary data, https://web.archive.org/web/20250603154047/https://qldspatial.information.qld.gov.au/catalogue/custom/index.page ",
        "description": "Cook Colliery mining lease: ML 1768",
        "coordinates precision": "extracted",
        "GEM Mine ID": "M1531",
        "Owners": "QCoal [100%]",
        "Owners (Non-ENG)": "",
        "Parent Company": "QCoal",
        "GEM Wiki Page (ENG)": "https://www.gem.wiki/Cook_Colliery",
        "GEM Wiki Page (Non-ENG)": "",
        "Coal Grade": "Thermal & Met",
        "Mine Name": "Cook Colliery Coal Mine",
        "Country / Area": "Australia",
        "Last researched": "Jun 16, 2025",
        "build_version": "Coal Mine Boundaries and Methane Sources - version 1.0.1 (built on February 13 2026 18.38.33 EST)"
      }
    },
    {
      "type": "Feature",
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              148.886322,
              -23.705762
            ],
            [
              148.886265,
              -23.714341
            ],
            [
              148.886222,
              -23.720762
            ],
            [
              148.886184,
              -23.726302
            ],
            [
              148.908918,
              -23.726429
            ],
            [
              148.908916,
              -23.716164
            ],
            [
              148.886599,
              -23.716037
            ],
            [
              148.886597,
              -23.705763
            ],
            [
              148.886322,
              -23.705762
            ]
          ]
        ]
      },
      "properties": {
        "id": "M1531.B3",
        "mine feature category": "mine boundary",
        "mine feature subcategory": "underground",
        "data source date": "15 Dec 2024 (from QSpatial mining leases page)",
        "notes": "The boundary is for mining lease ML 1769 and is one of five mining lease boundaries compile the Cook Colliery coal mine. The boundary was downloaded from the Queensland Spatial Catalogue's (QSpatial) Mining Leases boundary data, https://web.archive.org/web/20250603154047/https://qldspatial.information.qld.gov.au/catalogue/custom/index.page ",
        "description": "Cook Colliery mining lease: ML 1769",
        "coordinates precision": "extracted",
        "GEM Mine ID": "M1531",
        "Owners": "QCoal [100%]",
        "Owners (Non-ENG)": "",
        "Parent Company": "QCoal",
        "GEM Wiki Page (ENG)": "https://www.gem.wiki/Cook_Colliery",
        "GEM Wiki Page (Non-ENG)": "",
        "Coal Grade": "Thermal & Met",
        "Mine Name": "Cook Colliery Coal Mine",
        "Country / Area": "Australia",
        "Last researched": "Jun 16, 2025",
        "build_version": "Coal Mine Boundaries and Methane Sources - version 1.0.1 (built on February 13 2026 18.38.33 EST)"
      }
    },
    {
      "type": "Feature",
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              148.903942,
              -23.58674
            ],
            [
              148.903943,
              -23.666657
            ],
            [
              148.88658,
              -23.666657
            ],
            [
              148.886389,
              -23.69566
            ],
            [
              148.886322,
              -23.705762
            ],
            [
              148.886597,
              -23.705763
            ],
            [
              148.908913,
              -23.705888
            ],
            [
              148.908916,
              -23.716164
            ],
            [
              148.908918,
              -23.726429
            ],
            [
              148.886184,
              -23.726302
            ],
            [
              148.885904,
              -23.768005
            ],
            [
              148.94495,
              -23.767272
            ],
            [
              148.944946,
              -23.722173
            ],
            [
              148.944941,
              -23.677031
            ],
            [
              148.944937,
              -23.631888
            ],
            [
              148.944932,
              -23.586746
            ],
            [
              148.903942,
              -23.58674
            ]
          ]
        ]
      },
      "properties": {
        "id": "M1531.B4",
        "mine feature category": "mine boundary",
        "mine feature subcategory": "underground",
        "data source date": "15 Dec 2024 (from QSpatial mining leases page)",
        "notes": "The boundary is for mining lease ML 1779 and is one of five mining lease boundaries compile the Cook Colliery coal mine. The boundary was downloaded from the Queensland Spatial Catalogue's (QSpatial) Mining Leases boundary data, https://web.archive.org/web/20250603154047/https://qldspatial.information.qld.gov.au/catalogue/custom/index.page ",
        "description": "Cook Colliery mining lease: ML 1779",
        "coordinates precision": "extracted",
        "GEM Mine ID": "M1531",
        "Owners": "QCoal [100%]",
        "Owners (Non-ENG)": "",
        "Parent Company": "QCoal",
        "GEM Wiki Page (ENG)": "https://www.gem.wiki/Cook_Colliery",
        "GEM Wiki Page (Non-ENG)": "",
        "Coal Grade": "Thermal & Met",
        "Mine Name": "Cook Colliery Coal Mine",
        "Country / Area": "Australia",
        "Last researched": "Jun 16, 2025",
        "build_version": "Coal Mine Boundaries and Methane Sources - version 1.0.1 (built on February 13 2026 18.38.33 EST)"
      }
    },
    {
      "type": "Feature",
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              148.885904,
              -23.768005
            ],
            [
              148.885523,
              -23.824538
            ],
            [
              148.885391,
              -23.843913
            ],
            [
              148.885246,
              -23.865209
            ],
            [
              148.886605,
              -23.866453
            ],
            [
              148.944948,
              -23.865027
            ],
            [
              148.944957,
              -23.836158
            ],
            [
              148.94495,
              -23.767272
            ],
            [
              148.885904,
              -23.768005
            ]
          ]
        ]
      },
      "properties": {
        "id": "M1531.B5",
        "mine feature category": "mine boundary",
        "mine feature subcategory": "underground",
        "data source date": "15 Dec 2024 (from QSpatial mining leases page)",
        "notes": "The boundary is for mining lease ML 1799 and is one of five mining lease boundaries compile the Cook Colliery coal mine. The boundary was downloaded from the Queensland Spatial Catalogue's (QSpatial) Mining Leases boundary data, https://web.archive.org/web/20250603154047/https://qldspatial.information.qld.gov.au/catalogue/custom/index.page ",
        "description": "Cook Colliery mining lease: ML 1799",
        "coordinates precision": "extracted",
        "GEM Mine ID": "M1531",
        "Owners": "QCoal [100%]",
        "Owners (Non-ENG)": "",
        "Parent Company": "QCoal",
        "GEM Wiki Page (ENG)": "https://www.gem.wiki/Cook_Colliery",
        "GEM Wiki Page (Non-ENG)": "",
        "Coal Grade": "Thermal & Met",
        "Mine Name": "Cook Colliery Coal Mine",
        "Country / Area": "Australia",
        "Last researched": "Jun 16, 2025",
        "build_version": "Coal Mine Boundaries and Methane Sources - version 1.0.1 (built on February 13 2026 18.38.33 EST)"
      }
    },
    {
      "type": "Feature",
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              148.885284,
              -23.859644
            ],
            [
              148.885278,
              -23.860444
            ],
            [
              148.891092,
              -23.86634
            ],
            [
              148.892297,
              -23.866311
            ],
            [
              148.891489,
              -23.865824
            ],
            [
              148.891061,
              -23.865502
            ],
            [
              148.885284,
              -23.859644
            ]
          ]
        ]
      },
      "properties": {
        "id": "M1531.B6",
        "mine feature category": "mine boundary",
        "mine feature subcategory": "underground",
        "data source date": "15 Dec 2024 (from QSpatial mining leases page)",
        "notes": "The boundary is for mining lease ML 7357 and is one of five mining lease boundaries compile the Cook Colliery coal mine. The boundary was downloaded from the Queensland Spatial Catalogue's (QSpatial) Mining Leases boundary data, https://web.archive.org/web/20250603154047/https://qldspatial.information.qld.gov.au/catalogue/custom/index.page ",
        "description": "Cook Colliery mining lease: ML 7357",
        "coordinates precision": "extracted",
        "GEM Mine ID": "M1531",
        "Owners": "QCoal [100%]",
        "Owners (Non-ENG)": "",
        "Parent Company": "QCoal",
        "GEM Wiki Page (ENG)": "https://www.gem.wiki/Cook_Colliery",
        "GEM Wiki Page (Non-ENG)": "",
        "Coal Grade": "Thermal & Met",
        "Mine Name": "Cook Colliery Coal Mine",
        "Country / Area": "Australia",
        "Last researched": "Jun 16, 2025",
        "build_version": "Coal Mine Boundaries and Methane Sources - version 1.0.1 (built on February 13 2026 18.38.33 EST)"
      }
    },
    {
      "type": "Feature",
      "geometry": {
        "type": "Point",
        "coordinates": [
          148.897916,
          -23.716241
        ]
      },
      "properties": {
        "id": "M1531.P1",
        "mine feature category": "other",
        "mine feature subcategory": "preparation plant",
        "data source date": "15 Dec 2024 (from QSpatial mining leases page)",
        "notes": "The Coal Handling and Preparation Plant is described and mapped in the linked Bounty Mining Limited 2018 Prospectus ( https://web.archive.org/save/https://hotcopper.com.au/data/announcements/ASX/2A1086479_B2Y.pdf ). The map was corroborated with satellite imagery from 2023 and the location was extracted using Google Earth Pro.",
        "description": "Coal handling and preparation plant",
        "coordinates precision": "extracted",
        "GEM Mine ID": "M1531",
        "Owners": "QCoal [100%]",
        "Owners (Non-ENG)": "",
        "Parent Company": "QCoal",
        "GEM Wiki Page (ENG)": "https://www.gem.wiki/Cook_Colliery",
        "GEM Wiki Page (Non-ENG)": "",
        "Coal Grade": "Thermal & Met",
        "Mine Name": "Cook Colliery Coal Mine",
        "Country / Area": "Australia",
        "Last researched": "Jun 16, 2025",
        "build_version": "Coal Mine Boundaries and Methane Sources - version 1.0.1 (built on February 13 2026 18.38.33 EST)"
      }
    },
    {
      "type": "Feature",
      "geometry": {
        "type": "Point",
        "coordinates": [
          148.888485,
          -23.826693
        ]
      },
      "properties": {
        "id": "M1531.P4",
        "mine feature category": "other",
        "mine feature subcategory": "slope access or production shaft",
        "data source date": "2023-08-02 00:00:00",
        "notes": "The inclined access shaft was identified in Bounty Mining Ltd documents and visually extracted from satellite imagery. Per the Bounty Mining Ltd 2018 Prospectus: \"Access to the mine workings is via an inclined winch car on steel rails operated via the surface winder house. This same inclined shaft arrangement is used for transportation of men and material.\", page 184 https://web.archive.org/save/https://hotcopper.com.au/data/announcements/ASX/2A1086479_B2Y.pdf, and shown in Figure 7-2 : Aerial View of the Surface Infrastructure at Cook Colliery Mine Site, page 188.",
        "description": "Underground access portals",
        "coordinates precision": "extracted",
        "GEM Mine ID": "M1531",
        "Owners": "QCoal [100%]",
        "Owners (Non-ENG)": "",
        "Parent Company": "QCoal",
        "GEM Wiki Page (ENG)": "https://www.gem.wiki/Cook_Colliery",
        "GEM Wiki Page (Non-ENG)": "",
        "Coal Grade": "Thermal & Met",
        "Mine Name": "Cook Colliery Coal Mine",
        "Country / Area": "Australia",
        "Last researched": "Jun 16, 2025",
        "build_version": "Coal Mine Boundaries and Methane Sources - version 1.0.1 (built on February 13 2026 18.38.33 EST)"
      }
    },
    {
      "type": "Feature",
      "geometry": {
        "type": "Point",
        "coordinates": [
          148.89509,
          -23.832035
        ]
      },
      "properties": {
        "id": "M1531.P5",
        "mine feature category": "ventilation system",
        "mine feature subcategory": "vent",
        "data source date": "2023-08-02 00:00:00",
        "notes": "Identified using Figure 7-2 : Aerial View of the Surface Infrastructure at Cook Colliery Mine Site, page 188,  of the Bounty Mining Ltd 2018 Prospectus, https://web.archive.org/save/https://hotcopper.com.au/data/announcements/ASX/2A1086479_B2Y.pdf, and extracted using Google Earth Pro satellite imagery.",
        "description": "Return air shaft and fan house",
        "coordinates precision": "extracted",
        "GEM Mine ID": "M1531",
        "Owners": "QCoal [100%]",
        "Owners (Non-ENG)": "",
        "Parent Company": "QCoal",
        "GEM Wiki Page (ENG)": "https://www.gem.wiki/Cook_Colliery",
        "GEM Wiki Page (Non-ENG)": "",
        "Coal Grade": "Thermal & Met",
        "Mine Name": "Cook Colliery Coal Mine",
        "Country / Area": "Australia",
        "Last researched": "Jun 16, 2025",
        "build_version": "Coal Mine Boundaries and Methane Sources - version 1.0.1 (built on February 13 2026 18.38.33 EST)"
      }
    },
    {
      "type": "Feature",
      "geometry": {
        "type": "Point",
        "coordinates": [
          148.895297,
          -23.832934
        ]
      },
      "properties": {
        "id": "M1531.P6",
        "mine feature category": "other",
        "mine feature subcategory": "shaft",
        "data source date": "2023-08-02 00:00:00",
        "notes": "Identified using Figure 7-2 : Aerial View of the Surface Infrastructure at Cook Colliery Mine Site, page 188,  of the Bounty Mining Ltd 2018 Prospectus, https://web.archive.org/save/https://hotcopper.com.au/data/announcements/ASX/2A1086479_B2Y.pdf, and extracted using Google Earth Pro satellite imagery.",
        "description": "Second express shaft",
        "coordinates precision": "extracted",
        "GEM Mine ID": "M1531",
        "Owners": "QCoal [100%]",
        "Owners (Non-ENG)": "",
        "Parent Company": "QCoal",
        "GEM Wiki Page (ENG)": "https://www.gem.wiki/Cook_Colliery",
        "GEM Wiki Page (Non-ENG)": "",
        "Coal Grade": "Thermal & Met",
        "Mine Name": "Cook Colliery Coal Mine",
        "Country / Area": "Australia",
        "Last researched": "Jun 16, 2025",
        "build_version": "Coal Mine Boundaries and Methane Sources - version 1.0.1 (built on February 13 2026 18.38.33 EST)"
      }
    }
  ]
}
    var bounds = L.latLngBounds(L.latLng(-23.866458, 148.885246), L.latLng(-23.58674, 148.944967));                        
    var googleStreet =  L.tileLayer('https://mt0.google.com/vt/lyrs=m&hl=en&x={x}&y={y}&z={z}', {maxZoom: 20, attribution: '&copy; Google Maps'})
    var googleHybrid =  L.tileLayer('https://mt0.google.com/vt/lyrs=y&hl=en&x={x}&y={y}&z={z}', {maxZoom: 20, attribution: '&copy; Google Maps'})
    
    // When this map is embedded in the GEM Wiki via an iframe widget, the enclosing html css for width and height of #map does not consistently
    // come through, resulting in sometimes being 0, 0. This seems to mess fitBounds up resulting in a fully zoomed out map showing the entire planet.
    // I tried many different adjustments, but in the end chose a setView with a fixed zoom of 12 to be much more reliable.
    //var map = L.map('map', {layers: [googleHybrid]}).fitBounds(bounds) 
                        
    var map = L.map('map', {layers: [googleHybrid]}).setView([-23.726599, 148.91510649999998], 11.0)                     
    var markerLayerGroup = L.layerGroup();
                        

    function onEachFeature(feature, layer) {
        let popupContent = "<b><u>" + feature.properties['description'] + "</u></b><br /><br />"
        let tooltipContent = feature.properties['id'] + ": " + feature.properties['description']
        for (const [key, value] of Object.entries(feature.properties)) {
            popupContent += '<b>' + key + '</b>: ' + value + '<br />'
        }
        layer.bindPopup(popupContent, { maxHeight: 200 , maxWidth: 400})
        layer.bindTooltip(tooltipContent, { permanent: false, direction: 'right'});
        if (feature.properties['mine feature category'] == "mine boundary") {
           layer.setStyle({ color: '#CA4A50', fillColor: '#CA4A50', opacity: 1.0 });
        }
        markerLayerGroup.addLayer(layer)
	}
    
    markerLayerGroup.addTo(map);
    const mineLayer = L.geoJSON(mine, {onEachFeature}).addTo(map)
    var GEMMineIcon = L.icon({ iconUrl: 'https://maps.google.com/mapfiles/kml/paddle/red-circle.png', iconSize:  [40, 40]});
    
    const myDiv = document.getElementById('map');
    const width = myDiv.offsetWidth;
    const height = myDiv.offsetHeight;
    console.log("#map width: " + width + ", height: " + height);                    

    // Create a "dummy" layer group specifically to act as the tooltip toggle switch in the control
    var tooltipToggleLayer = L.layerGroup();
    // Add event listeners to the map that listen for the toggle layer being added or removed
    map.on('layeradd', function (e) {
        if (e.layer === tooltipToggleLayer) {
            // When the "Tooltip" overlay is selected, iterate over all markers and make tooltips permanent
            markerLayerGroup.eachLayer(function (layer) {
                if (layer.getTooltip()) {
                    layer.getTooltip().options.permanent = true;
                    layer.openTooltip(); // Open the tooltip permanently
                }
            });
        }
    });
    map.on('layerremove', function (e) {
        if (e.layer === tooltipToggleLayer) {
            // When the "Tooltip" overlay is deselected, make tooltips non-permanent and close them
            markerLayerGroup.eachLayer(function (layer) {
                if (layer.getTooltip()) {
                    layer.getTooltip().options.permanent = false;
                    layer.closeTooltip();
                }
            });
        }
    });

    map.on('zoomend', function() {
        console.log("Current zoom level: " + map.getZoom());
    });

    var baseMaps = {
        "Satellite view": googleHybrid,
        "Street view": googleStreet
    };
    var overlayMaps = {
        "Labels": tooltipToggleLayer // The toggle switch for tooltips
    };
    var layerControl = L.control.layers(baseMaps, overlayMaps).addTo(map);
                        
    var GEMMine;
                        
    GEMMine = L.marker([-23.7159074, 148.8893157], {icon: GEMMineIcon}).addTo(map); 
    GEMMine.bindPopup("Operating status(es): Operating");
    GEMMine.bindTooltip("Cook Colliery Coal Mine", { permanent: true, direction: 'right'});
