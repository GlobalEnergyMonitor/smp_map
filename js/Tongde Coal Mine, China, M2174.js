
    var mine = {
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              110.90089,
              37.42963
            ],
            [
              110.90069,
              37.42953
            ],
            [
              110.89787,
              37.42846
            ],
            [
              110.89762,
              37.42839
            ],
            [
              110.89458,
              37.42786
            ],
            [
              110.8918,
              37.42696
            ],
            [
              110.89157,
              37.42691
            ],
            [
              110.89046,
              37.42675
            ],
            [
              110.89098,
              37.42643
            ],
            [
              110.89194,
              37.42521
            ],
            [
              110.8919,
              37.42512
            ],
            [
              110.89094,
              37.42515
            ],
            [
              110.88956,
              37.42422
            ],
            [
              110.88988,
              37.42439
            ],
            [
              110.88987,
              37.42354
            ],
            [
              110.88877,
              37.42356
            ],
            [
              110.88876,
              37.42131
            ],
            [
              110.88864,
              37.42065
            ],
            [
              110.88619,
              37.42157
            ],
            [
              110.88524,
              37.42039
            ],
            [
              110.88398,
              37.42113
            ],
            [
              110.88323,
              37.42207
            ],
            [
              110.88142,
              37.42136
            ],
            [
              110.87951,
              37.42279
            ],
            [
              110.87832,
              37.42511
            ],
            [
              110.87735,
              37.42482
            ],
            [
              110.87712,
              37.42505
            ],
            [
              110.87738,
              37.42582
            ],
            [
              110.87452,
              37.42582
            ],
            [
              110.87405,
              37.42581
            ],
            [
              110.87246,
              37.42513
            ],
            [
              110.87205,
              37.42475
            ],
            [
              110.87207,
              37.41717
            ],
            [
              110.86835,
              37.41257
            ],
            [
              110.86835,
              37.41257
            ],
            [
              110.86835,
              37.41257
            ],
            [
              110.87628,
              37.39906
            ],
            [
              110.88749,
              37.39907
            ],
            [
              110.88983,
              37.39556
            ],
            [
              110.88999,
              37.3956
            ],
            [
              110.89322,
              37.39647
            ],
            [
              110.89324,
              37.39647
            ],
            [
              110.89864,
              37.39809
            ],
            [
              110.91281,
              37.40218
            ],
            [
              110.90311,
              37.41643
            ],
            [
              110.90819,
              37.41841
            ],
            [
              110.90089,
              37.42963
            ]
          ]
        ]
      },
      "properties": {
        "id": "M2174.B1",
        "mine feature category": "mine boundary",
        "mine feature subcategory": "underground",
        "data source date": "2021-09-01 00:00:00",
        "notes": "The coordinates can be found in the Table 1-1-1 on page 4 from the document Integrated Plan for Coal Resource Exploitation & Utilization, Mine Environmental Protection, and Land Reclamation of Shanxi Liulin Huifeng Xingye Tongde Coking Coal Co., Ltd., Liulin County, Shanxi Province (\u5c71\u897f\u7701\u67f3\u6797\u53bf\u5c71\u897f\u67f3\u6797\u6c47\u4e30\u5174\u4e1a\u540c\u5fb7\u7126\u7164\u6709\u9650\u516c\u53f8\u7164\u70ad\u8d44\u6e90\u5f00\u53d1\u5229\u7528\u548c\u77ff\u5c71\u73af\u5883\u4fdd\u62a4\u4e0e\u571f\u5730\u590d\u57a6\u65b9\u6848) https://web.archive.org/web/20250710192946/https://www.doc88.com/p-90599779761989.html ",
        "description": "Tongde coal mine boundary",
        "coordinates precision": "reported",
        "GEM Mine ID": "M2174",
        "Owners": "Shanxi Liulin Huifeng Xingye Tongde Coking Coal Company [100%]",
        "Owners (Non-ENG)": "",
        "Parent Company": "Shanxi Huifeng Industrial Coking Coal Group",
        "GEM Wiki Page (ENG)": "https://www.gem.wiki/Tongde_Coal_Mine",
        "GEM Wiki Page (Non-ENG)": "https://www.gem.wiki/%E5%B1%B1%E8%A5%BF%E6%9F%B3%E6%9E%97%E6%B1%87%E4%B8%B0%E5%85%B4%E4%B8%9A%E5%90%8C%E5%BE%B7%E7%84%A6%E7%85%A4%E6%9C%89%E9%99%90%E5%85%AC%E5%8F%B8",
        "Coal Grade": "Met",
        "Mine Name": "Tongde Coal Mine",
        "Country / Area": "China",
        "Last researched": "Jul 21, 2025",
        "build_version": "Coal Mine Boundaries and Methane Sources - version 1.0.1 (built on February 13 2026 18.38.33 EST)"
      }
    },
    {
      "type": "Feature",
      "geometry": {
        "type": "Point",
        "coordinates": [
          110.87608,
          37.41181
        ]
      },
      "properties": {
        "id": "M2174.P1",
        "mine feature category": "ventilation system",
        "mine feature subcategory": "vent",
        "data source date": "2021-09-01 00:00:00",
        "notes": "The coordinates can be found in the Table 4-1-5 on page 102 from the document Integrated Plan for Coal Resource Exploitation & Utilization, Mine Environmental Protection, and Land Reclamation of Shanxi Liulin Huifeng Xingye Tongde Coking Coal Co., Ltd., Liulin County, Shanxi Province (\u5c71\u897f\u7701\u67f3\u6797\u53bf\u5c71\u897f\u67f3\u6797\u6c47\u4e30\u5174\u4e1a\u540c\u5fb7\u7126\u7164\u6709\u9650\u516c\u53f8\u7164\u70ad\u8d44\u6e90\u5f00\u53d1\u5229\u7528\u548c\u77ff\u5c71\u73af\u5883\u4fdd\u62a4\u4e0e\u571f\u5730\u590d\u57a6\u65b9\u6848) https://web.archive.org/web/20250710192946/https://www.doc88.com/p-90599779761989.html ",
        "description": "Vent 1",
        "coordinates precision": "reported",
        "GEM Mine ID": "M2174",
        "Owners": "Shanxi Liulin Huifeng Xingye Tongde Coking Coal Company [100%]",
        "Owners (Non-ENG)": "",
        "Parent Company": "Shanxi Huifeng Industrial Coking Coal Group",
        "GEM Wiki Page (ENG)": "https://www.gem.wiki/Tongde_Coal_Mine",
        "GEM Wiki Page (Non-ENG)": "https://www.gem.wiki/%E5%B1%B1%E8%A5%BF%E6%9F%B3%E6%9E%97%E6%B1%87%E4%B8%B0%E5%85%B4%E4%B8%9A%E5%90%8C%E5%BE%B7%E7%84%A6%E7%85%A4%E6%9C%89%E9%99%90%E5%85%AC%E5%8F%B8",
        "Coal Grade": "Met",
        "Mine Name": "Tongde Coal Mine",
        "Country / Area": "China",
        "Last researched": "Jul 21, 2025",
        "build_version": "Coal Mine Boundaries and Methane Sources - version 1.0.1 (built on February 13 2026 18.38.33 EST)"
      }
    },
    {
      "type": "Feature",
      "geometry": {
        "type": "Point",
        "coordinates": [
          110.896049,
          37.418965
        ]
      },
      "properties": {
        "id": "M2174.P2",
        "mine feature category": "ventilation system",
        "mine feature subcategory": "vent",
        "data source date": "2024-11-01 00:00:00",
        "notes": "Identified visually from Google Earth Pro satellite imagery.",
        "description": "Vent 2",
        "coordinates precision": "extracted",
        "GEM Mine ID": "M2174",
        "Owners": "Shanxi Liulin Huifeng Xingye Tongde Coking Coal Company [100%]",
        "Owners (Non-ENG)": "",
        "Parent Company": "Shanxi Huifeng Industrial Coking Coal Group",
        "GEM Wiki Page (ENG)": "https://www.gem.wiki/Tongde_Coal_Mine",
        "GEM Wiki Page (Non-ENG)": "https://www.gem.wiki/%E5%B1%B1%E8%A5%BF%E6%9F%B3%E6%9E%97%E6%B1%87%E4%B8%B0%E5%85%B4%E4%B8%9A%E5%90%8C%E5%BE%B7%E7%84%A6%E7%85%A4%E6%9C%89%E9%99%90%E5%85%AC%E5%8F%B8",
        "Coal Grade": "Met",
        "Mine Name": "Tongde Coal Mine",
        "Country / Area": "China",
        "Last researched": "Jul 21, 2025",
        "build_version": "Coal Mine Boundaries and Methane Sources - version 1.0.1 (built on February 13 2026 18.38.33 EST)"
      }
    },
    {
      "type": "Feature",
      "geometry": {
        "type": "Point",
        "coordinates": [
          110.90337,
          37.42295
        ]
      },
      "properties": {
        "id": "M2174.P3",
        "mine feature category": "other",
        "mine feature subcategory": "shaft",
        "data source date": "2021-09-01 00:00:00",
        "notes": "The coordinates can be found in the Table 4-1-5 on page 102 from the document Integrated Plan for Coal Resource Exploitation & Utilization, Mine Environmental Protection, and Land Reclamation of Shanxi Liulin Huifeng Xingye Tongde Coking Coal Co., Ltd., Liulin County, Shanxi Province (\u5c71\u897f\u7701\u67f3\u6797\u53bf\u5c71\u897f\u67f3\u6797\u6c47\u4e30\u5174\u4e1a\u540c\u5fb7\u7126\u7164\u6709\u9650\u516c\u53f8\u7164\u70ad\u8d44\u6e90\u5f00\u53d1\u5229\u7528\u548c\u77ff\u5c71\u73af\u5883\u4fdd\u62a4\u4e0e\u571f\u5730\u590d\u57a6\u65b9\u6848) https://web.archive.org/web/20250710192946/https://www.doc88.com/p-90599779761989.html ",
        "description": "Main Slope Shaft",
        "coordinates precision": "reported",
        "GEM Mine ID": "M2174",
        "Owners": "Shanxi Liulin Huifeng Xingye Tongde Coking Coal Company [100%]",
        "Owners (Non-ENG)": "",
        "Parent Company": "Shanxi Huifeng Industrial Coking Coal Group",
        "GEM Wiki Page (ENG)": "https://www.gem.wiki/Tongde_Coal_Mine",
        "GEM Wiki Page (Non-ENG)": "https://www.gem.wiki/%E5%B1%B1%E8%A5%BF%E6%9F%B3%E6%9E%97%E6%B1%87%E4%B8%B0%E5%85%B4%E4%B8%9A%E5%90%8C%E5%BE%B7%E7%84%A6%E7%85%A4%E6%9C%89%E9%99%90%E5%85%AC%E5%8F%B8",
        "Coal Grade": "Met",
        "Mine Name": "Tongde Coal Mine",
        "Country / Area": "China",
        "Last researched": "Jul 21, 2025",
        "build_version": "Coal Mine Boundaries and Methane Sources - version 1.0.1 (built on February 13 2026 18.38.33 EST)"
      }
    },
    {
      "type": "Feature",
      "geometry": {
        "type": "Point",
        "coordinates": [
          110.90406,
          37.42224
        ]
      },
      "properties": {
        "id": "M2174.P4",
        "mine feature category": "other",
        "mine feature subcategory": "mine entrance or exit",
        "data source date": "2021-09-01 00:00:00",
        "notes": "The coordinates can be found in the Table 4-1-5 on page 102 from the document Integrated Plan for Coal Resource Exploitation & Utilization, Mine Environmental Protection, and Land Reclamation of Shanxi Liulin Huifeng Xingye Tongde Coking Coal Co., Ltd., Liulin County, Shanxi Province (\u5c71\u897f\u7701\u67f3\u6797\u53bf\u5c71\u897f\u67f3\u6797\u6c47\u4e30\u5174\u4e1a\u540c\u5fb7\u7126\u7164\u6709\u9650\u516c\u53f8\u7164\u70ad\u8d44\u6e90\u5f00\u53d1\u5229\u7528\u548c\u77ff\u5c71\u73af\u5883\u4fdd\u62a4\u4e0e\u571f\u5730\u590d\u57a6\u65b9\u6848) https://web.archive.org/web/20250710192946/https://www.doc88.com/p-90599779761989.html ",
        "description": "Auxiliary Slope Shaft",
        "coordinates precision": "reported",
        "GEM Mine ID": "M2174",
        "Owners": "Shanxi Liulin Huifeng Xingye Tongde Coking Coal Company [100%]",
        "Owners (Non-ENG)": "",
        "Parent Company": "Shanxi Huifeng Industrial Coking Coal Group",
        "GEM Wiki Page (ENG)": "https://www.gem.wiki/Tongde_Coal_Mine",
        "GEM Wiki Page (Non-ENG)": "https://www.gem.wiki/%E5%B1%B1%E8%A5%BF%E6%9F%B3%E6%9E%97%E6%B1%87%E4%B8%B0%E5%85%B4%E4%B8%9A%E5%90%8C%E5%BE%B7%E7%84%A6%E7%85%A4%E6%9C%89%E9%99%90%E5%85%AC%E5%8F%B8",
        "Coal Grade": "Met",
        "Mine Name": "Tongde Coal Mine",
        "Country / Area": "China",
        "Last researched": "Jul 21, 2025",
        "build_version": "Coal Mine Boundaries and Methane Sources - version 1.0.1 (built on February 13 2026 18.38.33 EST)"
      }
    },
    {
      "type": "Feature",
      "geometry": {
        "type": "Point",
        "coordinates": [
          110.88471,
          37.40245
        ]
      },
      "properties": {
        "id": "M2174.P5",
        "mine feature category": "ventilation system",
        "mine feature subcategory": "shaft",
        "data source date": "2021-09-01 00:00:00",
        "notes": "The coordinates can be found in the Table 4-1-5 on page 102 from the document Integrated Plan for Coal Resource Exploitation & Utilization, Mine Environmental Protection, and Land Reclamation of Shanxi Liulin Huifeng Xingye Tongde Coking Coal Co., Ltd., Liulin County, Shanxi Province (\u5c71\u897f\u7701\u67f3\u6797\u53bf\u5c71\u897f\u67f3\u6797\u6c47\u4e30\u5174\u4e1a\u540c\u5fb7\u7126\u7164\u6709\u9650\u516c\u53f8\u7164\u70ad\u8d44\u6e90\u5f00\u53d1\u5229\u7528\u548c\u77ff\u5c71\u73af\u5883\u4fdd\u62a4\u4e0e\u571f\u5730\u590d\u57a6\u65b9\u6848) https://web.archive.org/web/20250710192946/https://www.doc88.com/p-90599779761989.html ",
        "description": "Intake Shaft",
        "coordinates precision": "reported",
        "GEM Mine ID": "M2174",
        "Owners": "Shanxi Liulin Huifeng Xingye Tongde Coking Coal Company [100%]",
        "Owners (Non-ENG)": "",
        "Parent Company": "Shanxi Huifeng Industrial Coking Coal Group",
        "GEM Wiki Page (ENG)": "https://www.gem.wiki/Tongde_Coal_Mine",
        "GEM Wiki Page (Non-ENG)": "https://www.gem.wiki/%E5%B1%B1%E8%A5%BF%E6%9F%B3%E6%9E%97%E6%B1%87%E4%B8%B0%E5%85%B4%E4%B8%9A%E5%90%8C%E5%BE%B7%E7%84%A6%E7%85%A4%E6%9C%89%E9%99%90%E5%85%AC%E5%8F%B8",
        "Coal Grade": "Met",
        "Mine Name": "Tongde Coal Mine",
        "Country / Area": "China",
        "Last researched": "Jul 21, 2025",
        "build_version": "Coal Mine Boundaries and Methane Sources - version 1.0.1 (built on February 13 2026 18.38.33 EST)"
      }
    }
  ]
}
    var bounds = L.latLngBounds(L.latLng(37.39556, 110.86835), L.latLng(37.42963, 110.91281));                        
    var googleStreet =  L.tileLayer('https://mt0.google.com/vt/lyrs=m&hl=en&x={x}&y={y}&z={z}', {maxZoom: 20, attribution: '&copy; Google Maps'})
    var googleHybrid =  L.tileLayer('https://mt0.google.com/vt/lyrs=y&hl=en&x={x}&y={y}&z={z}', {maxZoom: 20, attribution: '&copy; Google Maps'})
    
    // When this map is embedded in the GEM Wiki via an iframe widget, the enclosing html css for width and height of #map does not consistently
    // come through, resulting in sometimes being 0, 0. This seems to mess fitBounds up resulting in a fully zoomed out map showing the entire planet.
    // I tried many different adjustments, but in the end chose a setView with a fixed zoom of 12 to be much more reliable.
    //var map = L.map('map', {layers: [googleStreet, googleHybrid]}).fitBounds(bounds) 
                        
    var map = L.map('map', {layers: [googleStreet, googleHybrid]}).setView([37.412595, 110.89058], 12.0)                     
    
    var baseMaps = {"Street view": googleStreet,"Satellite view": googleHybrid};
    var layerControl = L.control.layers(baseMaps).addTo(map);
    function onEachFeature(feature, layer) {
        let popupContent = "<b><u>" + feature.properties['description'] + "</u></b><br /><br />"
        let tooltipContent = feature.properties['id'] + ": " + feature.properties['description']
        for (const [key, value] of Object.entries(feature.properties)) {
            popupContent += '<b>' + key + '</b>: ' + value + '<br />'
        }
        layer.bindPopup(popupContent, { maxHeight: 200 , maxWidth: 400})
        layer.bindTooltip(tooltipContent, { permanent: false, direction: 'right'});
        if (feature.properties['mine feature category'] == "mine boundary") {
           layer.setStyle({ color: '#CA4A50', fillColor: '#CA4A50', opacity: 1.0 });
        }
	}
    const mineLayer = L.geoJSON(mine, {onEachFeature}).addTo(map)
    var GEMMineIcon = L.icon({ iconUrl: 'https://maps.google.com/mapfiles/kml/paddle/red-circle.png', iconSize:  [40, 40]});
    
    const myDiv = document.getElementById('map');
    const width = myDiv.offsetWidth;
    const height = myDiv.offsetHeight;
    console.log("#map width: " + width + ", height: " + height);                    

    var GEMMine;
                        
	GEMMine = L.marker([37.424651, 110.903812], {icon: GEMMineIcon}).addTo(map); 
	GEMMine.bindPopup('Operating status(es): Operating');
	GEMMine.bindTooltip('Tongde Coal Mine', { permanent: true, direction: 'right'});
