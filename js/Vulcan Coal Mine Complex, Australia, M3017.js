
    var mine = {
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              148.195842,
              -22.302842
            ],
            [
              148.195841,
              -22.302842
            ],
            [
              148.195557,
              -22.300712
            ],
            [
              148.195279,
              -22.299311
            ],
            [
              148.194532,
              -22.295165
            ],
            [
              148.194488,
              -22.29446
            ],
            [
              148.194109,
              -22.292148
            ],
            [
              148.194028,
              -22.291488
            ],
            [
              148.194,
              -22.290538
            ],
            [
              148.194153,
              -22.288927
            ],
            [
              148.194291,
              -22.287664
            ],
            [
              148.194396,
              -22.286945
            ],
            [
              148.194427,
              -22.286196
            ],
            [
              148.194365,
              -22.285273
            ],
            [
              148.19418,
              -22.284365
            ],
            [
              148.193875,
              -22.283488
            ],
            [
              148.193454,
              -22.282649
            ],
            [
              148.192925,
              -22.281868
            ],
            [
              148.192294,
              -22.281152
            ],
            [
              148.191573,
              -22.280517
            ],
            [
              148.190876,
              -22.280025
            ],
            [
              148.188859,
              -22.278722
            ],
            [
              148.187657,
              -22.27783
            ],
            [
              148.187015,
              -22.277171
            ],
            [
              148.186465,
              -22.276442
            ],
            [
              148.186019,
              -22.275661
            ],
            [
              148.185683,
              -22.275638
            ],
            [
              148.185392,
              -22.275618
            ],
            [
              148.181544,
              -22.275355
            ],
            [
              148.181375,
              -22.275344
            ],
            [
              148.180888,
              -22.275311
            ],
            [
              148.180663,
              -22.275295
            ],
            [
              148.174641,
              -22.274884
            ],
            [
              148.168934,
              -22.279626
            ],
            [
              148.168915,
              -22.279642
            ],
            [
              148.168915,
              -22.279642
            ],
            [
              148.168915,
              -22.279642
            ],
            [
              148.149564,
              -22.262396
            ],
            [
              148.131349,
              -22.284572
            ],
            [
              148.128253,
              -22.285831
            ],
            [
              148.128253,
              -22.28819
            ],
            [
              148.130106,
              -22.290127
            ],
            [
              148.136395,
              -22.299084
            ],
            [
              148.147963,
              -22.30279
            ],
            [
              148.154135,
              -22.292479
            ],
            [
              148.163733,
              -22.295809
            ],
            [
              148.165947,
              -22.296577
            ],
            [
              148.174389,
              -22.298588
            ],
            [
              148.181333,
              -22.302587
            ],
            [
              148.180765,
              -22.30333
            ],
            [
              148.177836,
              -22.304905
            ],
            [
              148.180018,
              -22.308234
            ],
            [
              148.183814,
              -22.306101
            ],
            [
              148.184481,
              -22.3044
            ],
            [
              148.193445,
              -22.309562
            ],
            [
              148.193911,
              -22.311576
            ],
            [
              148.194309,
              -22.312998
            ],
            [
              148.194859,
              -22.314446
            ],
            [
              148.195595,
              -22.316003
            ],
            [
              148.196442,
              -22.31751
            ],
            [
              148.197271,
              -22.319
            ],
            [
              148.198253,
              -22.320481
            ],
            [
              148.199929,
              -22.322868
            ],
            [
              148.201741,
              -22.325204
            ],
            [
              148.203653,
              -22.327388
            ],
            [
              148.204923,
              -22.328793
            ],
            [
              148.205888,
              -22.330012
            ],
            [
              148.206675,
              -22.331865
            ],
            [
              148.207319,
              -22.336741
            ],
            [
              148.209147,
              -22.345578
            ],
            [
              148.209926,
              -22.354482
            ],
            [
              148.212952,
              -22.364735
            ],
            [
              148.214192,
              -22.367044
            ],
            [
              148.216426,
              -22.369007
            ],
            [
              148.230716,
              -22.371095
            ],
            [
              148.256797,
              -22.402432
            ],
            [
              148.265268,
              -22.409137
            ],
            [
              148.27138,
              -22.412477
            ],
            [
              148.271708,
              -22.411651
            ],
            [
              148.271999,
              -22.410781
            ],
            [
              148.272273,
              -22.409918
            ],
            [
              148.272626,
              -22.408658
            ],
            [
              148.272756,
              -22.408173
            ],
            [
              148.272936,
              -22.407287
            ],
            [
              148.273084,
              -22.406395
            ],
            [
              148.273202,
              -22.405499
            ],
            [
              148.273285,
              -22.404601
            ],
            [
              148.273338,
              -22.403685
            ],
            [
              148.273354,
              -22.402777
            ],
            [
              148.273346,
              -22.401873
            ],
            [
              148.273301,
              -22.400972
            ],
            [
              148.273222,
              -22.400072
            ],
            [
              148.273112,
              -22.39918
            ],
            [
              148.272804,
              -22.396287
            ],
            [
              148.272525,
              -22.395408
            ],
            [
              148.272193,
              -22.394544
            ],
            [
              148.271802,
              -22.393699
            ],
            [
              148.271363,
              -22.392887
            ],
            [
              148.267308,
              -22.38563
            ],
            [
              148.26397,
              -22.379674
            ],
            [
              148.263481,
              -22.378849
            ],
            [
              148.262941,
              -22.378091
            ],
            [
              148.262334,
              -22.377378
            ],
            [
              148.261311,
              -22.376278
            ],
            [
              148.249691,
              -22.362963
            ],
            [
              148.248634,
              -22.361751
            ],
            [
              148.247195,
              -22.360029
            ],
            [
              148.246457,
              -22.359183
            ],
            [
              148.24286,
              -22.355132
            ],
            [
              148.232404,
              -22.343119
            ],
            [
              148.23193,
              -22.342525
            ],
            [
              148.231778,
              -22.342335
            ],
            [
              148.230684,
              -22.341146
            ],
            [
              148.228716,
              -22.338887
            ],
            [
              148.228085,
              -22.338194
            ],
            [
              148.227409,
              -22.337537
            ],
            [
              148.226691,
              -22.336922
            ],
            [
              148.225896,
              -22.336321
            ],
            [
              148.2251,
              -22.335793
            ],
            [
              148.224272,
              -22.335313
            ],
            [
              148.207454,
              -22.32608
            ],
            [
              148.206618,
              -22.325612
            ],
            [
              148.205812,
              -22.325102
            ],
            [
              148.20504,
              -22.324547
            ],
            [
              148.204307,
              -22.323946
            ],
            [
              148.203617,
              -22.323304
            ],
            [
              148.202973,
              -22.322626
            ],
            [
              148.202438,
              -22.321946
            ],
            [
              148.202003,
              -22.321368
            ],
            [
              148.201661,
              -22.320736
            ],
            [
              148.201302,
              -22.320155
            ],
            [
              148.200709,
              -22.319315
            ],
            [
              148.199002,
              -22.316458
            ],
            [
              148.198561,
              -22.315646
            ],
            [
              148.198177,
              -22.314812
            ],
            [
              148.197848,
              -22.313956
            ],
            [
              148.197577,
              -22.313083
            ],
            [
              148.197366,
              -22.312196
            ],
            [
              148.196455,
              -22.306697
            ],
            [
              148.196409,
              -22.306266
            ],
            [
              148.196245,
              -22.30542
            ],
            [
              148.196096,
              -22.304523
            ],
            [
              148.195842,
              -22.302842
            ]
          ]
        ]
      },
      "properties": {
        "id": "M3017.B1",
        "mine feature category": "mine boundary",
        "mine feature subcategory": "surface",
        "data source date": "2025-09-02 00:00:00",
        "notes": "The mining leases for the mine are listed and shown in a diagram on the Vitrinite's Vulcan Mine website https://web.archive.org/web/20250423232119/https://vitrinite.com.au/community/assets/vulcan-mine, last modified November 28 2023. The complex includes two adjacent mining leases: ML 700060 Vulcan Mine and ML 700023 Vulcan South extension which is summarized on page 1 of Advice to decision maker on coal mining project IESC 2024-149: Vulcan South Coal Mine Project (EPBC 2023/09708) \u2013 Expansion,  May 13 2024, https://web.archive.org/web/20250315061603/https://www.iesc.gov.au/sites/default/files/2024-07/iesc-advice-vulcan-south-coal-mine-2024-149.pdf.  The boundary is the outer perimeter of the two mining lease geometries, which were extracted from the Queensland Mining Leases dataset, last updated Sep 2 2025, https://web.archive.org/web/2/https://www.data.qld.gov.au/dataset/queensland-mining-and-exploration-tenure-series/resource/f87794b8-7b9a-4732-89bb-56ccb2228d27.  The area of the boundary is approximately 42 sq km.",
        "description": "Vulcan Coal Mine Complex boundary",
        "coordinates precision": "extracted",
        "GEM Mine ID": "M3017",
        "Owners": "Vitrinite [100%]",
        "Owners (Non-ENG)": "",
        "Parent Company": "Vitrinite",
        "GEM Wiki Page (ENG)": "https://www.gem.wiki/Vulcan_Coal_Mine_Complex",
        "GEM Wiki Page (Non-ENG)": "",
        "Coal Grade": "Met",
        "Mine Name": "Vulcan Coal Mine Complex",
        "Country / Area": "Australia",
        "Last researched": "Nov 14, 2025",
        "build_version": "Coal Mine Boundaries and Methane Sources - version 1.0.1 (built on February 13 2026 18.38.33 EST)"
      }
    }
  ]
}
    var bounds = L.latLngBounds(L.latLng(-22.412477, 148.128253), L.latLng(-22.262396, 148.273354));                        
    var googleStreet =  L.tileLayer('https://mt0.google.com/vt/lyrs=m&hl=en&x={x}&y={y}&z={z}', {maxZoom: 20, attribution: '&copy; Google Maps'})
    var googleHybrid =  L.tileLayer('https://mt0.google.com/vt/lyrs=y&hl=en&x={x}&y={y}&z={z}', {maxZoom: 20, attribution: '&copy; Google Maps'})
    
    // When this map is embedded in the GEM Wiki via an iframe widget, the enclosing html css for width and height of #map does not consistently
    // come through, resulting in sometimes being 0, 0. This seems to mess fitBounds up resulting in a fully zoomed out map showing the entire planet.
    // I tried many different adjustments, but in the end chose a setView with a fixed zoom of 12 to be much more reliable.
    //var map = L.map('map', {layers: [googleStreet, googleHybrid]}).fitBounds(bounds) 
                        
    var map = L.map('map', {layers: [googleStreet, googleHybrid]}).setView([-22.3374365, 148.2008035], 12.0)                     
    
    var baseMaps = {"Street view": googleStreet,"Satellite view": googleHybrid};
    var layerControl = L.control.layers(baseMaps).addTo(map);
    function onEachFeature(feature, layer) {
        let popupContent = "<b><u>" + feature.properties['description'] + "</u></b><br /><br />"
        let tooltipContent = feature.properties['id'] + ": " + feature.properties['description']
        for (const [key, value] of Object.entries(feature.properties)) {
            popupContent += '<b>' + key + '</b>: ' + value + '<br />'
        }
        layer.bindPopup(popupContent, { maxHeight: 200 , maxWidth: 400})
        layer.bindTooltip(tooltipContent, { permanent: false, direction: 'right'});
        if (feature.properties['mine feature category'] == "mine boundary") {
           layer.setStyle({ color: '#CA4A50', fillColor: '#CA4A50', opacity: 1.0 });
        }
	}
    const mineLayer = L.geoJSON(mine, {onEachFeature}).addTo(map)
    var GEMMineIcon = L.icon({ iconUrl: 'https://maps.google.com/mapfiles/kml/paddle/red-circle.png', iconSize:  [40, 40]});
    
    const myDiv = document.getElementById('map');
    const width = myDiv.offsetWidth;
    const height = myDiv.offsetHeight;
    console.log("#map width: " + width + ", height: " + height);                    

    var GEMMine;
                        
	GEMMine = L.marker([-22.310714, 148.185988], {icon: GEMMineIcon}).addTo(map); 
	GEMMine.bindPopup('Operating status(es): Operating, Proposed');
	GEMMine.bindTooltip('Vulcan Coal Mine Complex', { permanent: true, direction: 'right'});
